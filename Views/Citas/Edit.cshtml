@model Citas.Domain.Entities.Cita
@using Citas.Domain.Entities

@{
    ViewData["Title"] = "Editar Cita";
    var medicos = ViewBag.Medicos as List<Medico> ?? new List<Medico>();
    var pacientes = ViewBag.Pacientes as List<Paciente> ?? new List<Paciente>();
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Editar Cita</h2>
    <a class="btn btn-secondary" asp-action="Index">Volver</a>
</div>

<form asp-action="Edit" method="post" class="row g-3">
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="IdCita" />

    <div class="col-md-6">
        <label class="form-label">Paciente</label>
        <select class="form-select" asp-for="IdPaciente" required>
            <option value="">-- Seleccione --</option>
            @foreach (var p in pacientes)
            {
                <option value="@p.IdPaciente">@p.Nombre</option>
            }
        </select>
    </div>

    <div class="col-md-6">
        <label class="form-label">Médico</label>
        <select class="form-select" asp-for="IdMedico" required>
            <option value="">-- Seleccione --</option>
            @foreach (var m in medicos)
            {
                <option value="@m.IdMedico">@m.Nombre (@m.Especialidad)</option>
            }
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">Fecha</label>
        <input class="form-control" asp-for="Fecha" type="date" required />
    </div>

    <div class="col-md-4">
        <label class="form-label">Hora inicio</label>
        <input class="form-control" asp-for="HoraInicio" type="time" required />
    </div>

    <div class="col-md-4">
        <label class="form-label">Estado</label>
        <select class="form-select" asp-for="Estado" required>
            <option value="PENDIENTE">PENDIENTE</option>
            <option value="ATENDIDA">ATENDIDA</option>
            <option value="CANCELADA">CANCELADA</option>
        </select>
    </div>

    <div class="col-md-8">
        <label class="form-label">Motivo</label>
        <input class="form-control" asp-for="Motivo" maxlength="300" />
    </div>

    <div class="col-md-4">
        <label class="form-label">Precio</label>
        <input class="form-control" asp-for="Precio" type="number" step="0.01" min="0" required />
    </div>

    <div class="col-12">
        <button type="submit" class="btn btn-warning">Guardar cambios</button>
    </div>
</form>
